<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Animação #02</title>
    <link rel="stylesheet" href="css/estilo.css">
    <script src="js/jquery.js"></script>
    <style>
        body {
            position: relative;
            background-color: #999;
            color: #000;
        }

        div {
            position: absolute;
            display: inline;
            border: solid 10px #000;
            padding: 50px;
            font-size: 3em;
            background-color: crimson;
        }
    </style>
</head>

<body>
    <div>Animar!</div>

    <script>
        // Criando animações personalizadas com animate
        
        // ------------------------------------------------------------------ //
        // Usando callbacks
            /* function alterarLargura(seletor, valor, duracao, callback) {
                // Criando animação para alterar a largura
                // - Altero a propriedade width do(s) elemento(s)
                // - Determino a duração da animação
                // - Informo a callback que será executada quando finalizar a
                //   animação
                $(seletor).animate(
                    { width: `+=${valor}` },
                    duracao,
                    callback
                )
            }

            function moverDiagonal(seletor, valor, duracao, callback) {
                // Criando animação para mover na diagonal
                // - Altero a propriedade top e left igualmente do(s) elemento(s)
                // - Determino a duração da animação
                // - Informo a callback que será executada quando finalizar a
                //   animação
                $(seletor).animate(
                    { top: `+=${valor}`, left: `+=${valor}` },
                    duracao,
                    callback
                )
            }

            function girarHorario(seletor, valor, duracao, callback) {
                // Criando animação para mover na diagonal
                // - Altero a propriedade top e left igualmente do(s) elemento(s)
                // - Determino a duração da animação
                // - Informo a callback que será executada quando finalizar a
                //   animação
                $(seletor).animate(
                    { transform: `+=${valor}` },
                    {
                        step: function (valor) {  // Pra cada iteração, executa step
                            $(this).css('transform', `rotate(${valor}deg)`)
                        },
                        duration: duracao
                    },
                    'linear',
                    callback
                )
            }

            const elementos = 'div'

            alterarLargura(elementos, 300, 200, () => {
                alterarLargura(elementos, -300, 'slow', () => {
                    moverDiagonal(elementos, 300, 1000, () => {
                        girarHorario(elementos, 3300, 3000)
                    })
                })
            }) */
        // ------------------------------------------------------------------ //


        // ------------------------------------------------------------------ //
        // Usando Promises
            /* function alterarLargura(seletor, valor, duracao) {
                return new Promise((resolve, reject) => {
                    try {
                        $(seletor).animate(
                            { width: `+=${valor}` },
                            duracao
                        )
                    } catch (e) {
                        reject(e)
                    }
                })
            }

            function moverDiagonal(seletor, valor, duracao) {
                return new Promise((resolve, reject) => {
                    try {
                        $(seletor).animate(
                            { top: `+=${valor}`, left: `+=${valor}` },
                            duracao
                        )
                    } catch (e) {
                        reject(e)
                    }
                })
            }

            function girarHorario(seletor, valor, duracao) {
                return new Promise((resolve, reject) => {
                    try {
                        $(seletor).animate(
                            { transform: `+=${valor}` },
                            {
                                step: function (valor) {
                                    $(this).css('transform', `rotate(${valor}deg)`)
                                },
                                duration: duracao
                            },
                            'linear'
                        )
                    } catch (e) {
                        reject(e)
                    }
                })
            }

            const animarElemento = (elementos) => {
                alterarLargura(elementos, 300, 200)
                    .then(alterarLargura(elementos, -300, 'slow'))
                    .then(moverDiagonal(elementos, 300, 1000))
                    .then(girarHorario(elementos, 3300, 3000))
            }
            
            const seletor = 'div'
            animarElemento(seletor) */
        // ------------------------------------------------------------------ //


        // ------------------------------------------------------------------ //
        // Usando async/await
            function alterarLargura(seletor, valor, duracao) {
                $(seletor).animate(
                    { width: `+=${valor}` },
                    duracao
                )
            }

            function moverDiagonal(seletor, valor, duracao) {
                $(seletor).animate(
                    { top: `+=${valor}`, left: `+=${valor}` },
                    duracao
                )
            }

            function girarHorario(seletor, valor, duracao) {
                $(seletor).animate(
                    { transform: `+=${valor}` },
                    {
                        step: function (valor) {  // Pra cada iteração, executa step
                            $(this).css('transform', `rotate(${valor}deg)`)
                        },
                        duration: duracao
                    },
                    'linear')
            }

            const animarElemento = async (elementos) => {
                await alterarLargura(elementos, 300, 200)
                await alterarLargura(elementos, -300, 'slow')
                await moverDiagonal(elementos, 300, 1000)
                await girarHorario(elementos, 3300, 3000)
            }

            const seletor = 'div'
            animarElemento(seletor)
        // ------------------------------------------------------------------ //
    </script>
</body>
</html>